<script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../bower_components/google-map/google-map.html">
<template id="aptcopilot-property">
    <style>
        :host {
            display: block;
            margin: 20px;
        }

        .property-header {}

        .property-header-title {
            outline: 1px red solid;
            text-align: center;
        }

        .property-header-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 50px;
            grid-auto-rows: minmax(auto, auto);
            margin-bottom: 20px;
        }

        .property-header-pic {
            outline: 1px red solid;
            grid-column: 2;
            grid-row: 1;
        }

        .property-header-basic {
            outline: 1px red solid;
            grid-column: 1;
            grid-row: 1;
        }

        .property-header-owner {
            outline: 1px red solid;
            grid-column: 3;
            grid-row: 1;
        }

        .property-content {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 50px;
            grid-auto-rows: 300px 300px 1fr 1fr 1fr;
        }

        .property-content-gallery {
            outline: 1px red solid;
            grid-column: 1;
            grid-row: 1;
        }

        .property-content-units {
            outline: 1px red solid;
            grid-column: 1;
            grid-row: 2;
        }

        .property-content-map {
            outline: 1px red solid;
            grid-column: 2;
            grid-row: 1 / 3;
        }

        .property-content-ratings {
            outline: 1px red solid;
            grid-column: 1 / 3;
            grid-row: 3;
        }

        .property-content-amenities {
            outline: 1px red solid;
            grid-column: 1 / 3;
            grid-row: 4;
        }

        .property-content-notes {
            outline: 1px red solid;
            grid-column: 1 / 3;
            grid-row: 5;
        }

        #img {
            height: 100%;
            width: 100%;
        }


        google-map {
            height: 100%;
            width: 100%;
        }
    </style>

    <div class="property-header">
        <h1 id="name" class="property-header-title"></h1>
        <div class="property-header-info">
            <div class="property-header-basic">
                Basic property info
            </div>
            <div class="property-header-pic">
                <img id="img">
            </div>
            <div class="property-header-owner">
                Owners info
            </div>
        </div>
    </div>
    <div class="property-content">
        <div class="property-content-gallery">gallery</div>
        <div class="property-content-units">Units</div>
        <div class="property-content-map">
            <google-map fit-to-markers api-key="AIzaSyDwZt-Shm5g3q8oCNYX6vQ97jo81FIrij4">
                <!-- <google-map-marker draggable="true"></google-map-marker> -->
            </google-map>
        </div>
        <div class="property-content-ratings">Ratings</div>
        <div class="property-content-amenities">Amenities</div>
        <div class="property-content-notes">Notes</div>
    </div>



</template>

<script>
    let propertyTmpl = document.currentScript.ownerDocument.querySelector('#aptcopilot-property');
    window.customElements.define('aptcopilot-property', class extends HTMLElement {
        constructor() {
            super();
            let shadowRoot = this.attachShadow({ mode: 'open' });
            shadowRoot.appendChild(propertyTmpl.content.cloneNode(true));
            // shadowRoot.querySelector('#name').innerHTML = 'Name: ' + data.name; 
        };

        connectedCallback() {
            let data = JSON.parse(this.getAttribute("data"));

            this.shadowRoot.querySelector(".property-header-title").innerHTML = data.name;
            this.shadowRoot.querySelector(".property-header-basic").innerHTML = data.info;

            this.shadowRoot.querySelector("#img").setAttribute("src", "../images/home.jpeg");
            
            var marker = document.createElement("google-map-marker")
            marker.setAttribute('latitude', data.location.latitude);
            marker.setAttribute('longitude', data.location.longitude);
            this.shadowRoot.querySelector("google-map").appendChild(marker)
        }
    });
</script>
